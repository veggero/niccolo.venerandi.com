<html>
    <head>
        <link rel=stylesheet href="../style.css">
        <title>[veggero@omnya structs]</title>
    </head>
    <body>
        <center>
		<a href=../code.html>..</a><br>
        
            <h1 id=title>Structure Behaviour</h1>
            
            <span>
                <h3>Types of structures:</h3>
                <p>Structure:</p>
                <code>(int x, int y)</code>
                <p>Dictionary (structure with defined<br> arguments):</p>
                <code>(int x: 3, int y: 4)</code>
                <p>Function (structure with<br> undefinible arguments):</p>
                <code>(int x, int y: x + 3)</code>
            </span>
            
            <span>
                <h3>How do structures react:</h3>
                <p>Structure and dictionary:</p>
                <code>(int x, int y)(int x: 3, int z: 4) = \<br>(int x: 3, int y, int z: 4)</code>
                <p>Function and dictionary:</p>
                <code>(int x, int y: x + 3)(int x: 4) = \<br>(int x: 4, int y: 7)</code>
            </span>
            
            <br>
            
            <span>
                <h3>Manipulating structures</h3>
                <p>Setting new values or calling:</p>
                <code>(int x: 3, int y: x+1)(int x: 10) =\<br>(int x: 10, int y: 11)</code>
                <p>Saving structure value to a local variable:</p>
                <code>(int x: 3)(x -> something)</code>
                <p>Getting a value from a structure:</p>
                <code>1 + (int y, int x: y+1)(y: 5 | x) = 4</code>
                <p>A mix of them:</p>
                <code>(int y: x + 3, int z: 0)(int x: 4, y -> height | z)</code>
            </span>
            
            <span>
                <h3>Types</h3>
<pre>int a: 3,
str b: "hello",
float c: 4.12,
struct d: (int x),
fun e: (int x, int y: x + 1),
dict f: (a: 1, b: 2),

list int g: [1, 2, 3],
dict int h: (a: 1, b: 2)
</pre>
            </span>
            
            <br>
            
            <span>
                <h3>Functions</h3>
                <p>How to declare a function:</p>
                <code>sum: (int a, int b, int result: a + b)</code>
                <p>How to call a function:</p>
                <code>sum(a: 3, b: 4 | result)</code>
                <p>A bit more complex function:</p>
<pre>range: (
    int from,
    int to,
    list int numbers: from..to,
    int length: to-from
)</pre>
                <p>Assigning function values to variables:</p>
<pre>range(
    from: 0,
    to: 100,
    numbers -> to_check,
    length -> range_len
)
</pre>
            </span>
            
            <span>
                <h3>Classes</h3>
                <p>A simple class:</p>
<pre>point: (
    int x,
    int y,
    str repr: "Coord {x} {y}"(x: x, y: y | formatted)
)</pre>
            <p>Creating an instance:</p>
            <code>point c: point(x: 2, y: 10)</code>
            <p>Operating on classes:</p>
<pre>move(
    int delta_x,
    int delta_y,
    point to_move,
    
    int old_x: to_move.x,
    int old_y: to_move.y,
    
    point moved_point: point(x: old_x+delta_x, y: old_y+delta_y)
)</pre>
                <p>What methods should be in classes, and what globals?<br>
                Classes methods are the one that only use class<br>
                data without any other parameter. Class method should<br>
                never change values.<br>
                Examples: to_str, repr, length, sorted, formatted.<br>
                Data should only be modified by external functions.</p>
            </span>
            
            <br>
            
            <span>
                <h3>Making things a little easier</h3>
                <p>Calling a function with values, without specifing<br>
                where should they go, will set them to the first variable of<br>
                their type:</p>
                <code>(int, str, bool)("hey", 24, true) =\<br>(int: 24, str: "hey", bool: true)</code>
                <p>If there are two empity variables of<br> the same type, and two values of that type<br>
                are given, the output will be a list:</p>
                <code>(int, int)(1, 2) = (int: [1, 2])</code>
                <p>Also, if a structure ends with <var>-> value</var>, that value be<br>
                always returned:</p>
                <code>(int -> int + 1)(4) = 5<br>
                (int x -> x+10)(int x: 3) = 13</code>
                <p>Also, you can semplify proprieties getting:</p>
                <code>(x: 3)(|x) = (x: 3).x</code>
                
            </span>
            
            <span>
                <h3>Curried Functions</h3>
                <p>You don't have to provide all the<br>
                arguments to a function with the<br>
                first call.<br>
                Let's take a general function<br> 
                to sum two integers:</p>
                <code>sum: (int, int -> int[0] + int[1])<br>
                sum(1, 2) = 3</code>
                <p>What happens if we provide only<br>
                one integer?</p>
                <code>sum_to_two: sum(2)<br>
                sum_to_two(7) = 9<br>
                sum_to_two(4) = 6</code>
                <p>This works also with args/classes:</p>
                <code>point: (int x, int y)<br>
                x_axis: point(y: 0)<br>
                y_axis: point(x: 0)<br>
                c: y_axis(y: 5)</code>
            </span>
            
        </center>
    </body>
</html>
